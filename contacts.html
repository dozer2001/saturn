<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="stylesheet" href="css/styles.css">

    <title>Document</title>
</head>

<body>
    <header class="header header-inside header-inside_more">

        <div class="header__content">
            <div class="header__content_navbar">
                <a href="#" class="header__logo">
                    <img src="images/logo-f.png" alt="">
                </a>
                <div class="header__navbar">
                    <a href="#" class="header__navbar_link active">
                        О компании
                    </a>
                    <a href="#" class="header__navbar_link">
                        Солнечный коллектор
                    </a>
                    <a href="#" class="header__navbar_link">
                        Решения
                    </a>
                    <a href="#" class="header__navbar_link">
                        Расчет стоимости
                    </a>
                    <a href="#" class="header__navbar_link">
                        Статьи
                    </a>
                    <a href="#" class="header__navbar_link">
                        Контакты
                    </a>
                </div>
            </div>
            <div class="header__phone">
                <a href="tel:+78612520913">
                    <svg class="icon icon_phone">
                        <use xlink:href="images/phone.svg#phone">
                        </use>
                    </svg>
                    +7 (861) 252-09-13
                </a>
                <span>Бесплатно по России</span>
            </div>
        </div>

        <div class="header__mobile toggler">
            <div class="header__mobile_head">
                <div class="header__mobile_logo">
                    <img src="images/logo-m-1.png" alt="">
                    <img src="images/logo-m-2.png" alt="">
                </div>
                <div class="hamburger hamburger--spin-r toggler-trigger">
                    <div class="hamburger-box">
                        <div class="hamburger-inner"></div>
                    </div>
                </div>
            </div>
            <div class="header__mobile_content toggler__content">
                <div class="header__mobile_col">
                    <a href="#" class="header__mobile_list">
                        О компании
                    </a>
                    <a href="#" class="header__mobile_list">
                        Солнечный коллектор
                    </a>
                    <a href="#" class="header__mobile_list">
                        Решения
                    </a>
                    <a href="#" class="header__mobile_list">
                        Расчет стоимости
                    </a>
                    <a href="#" class="header__mobile_list">
                        Статьи
                    </a>
                    <a href="#" class="header__mobile_list">
                        Контакты
                    </a>

                    <a href="#" class="header__mobile_phone">
                        <svg class="icon icon_phone">
                            <use xlink:href="images/phone.svg#phone">
                            </use>
                        </svg>
                        +7 (861) 252-09-13
                    </a>
                </div>
            </div>
        </div>

    </header>

    <main class="main main_bg">

        <section class="section contacts contacts_offset">
            <div class="wrapper wrapper_large">

                <div class="row">
                    <div class="col col--xl-4 col--lg-4 col--md-6 col--sm-6">

                        <h2 class="title title_bold">
                            Как нас найти?
                        </h2>

                    </div>
                    <div class="col col--xl-4 col--lg-4 col--md-6 col--sm-6">
                        <div class="contacts__item">
                            <a href="tel:+78612520913">+7 (861) 252-09-13</a>

                            <div class="contacts__mobile">
                                <span>Мобильный телефон:</span>
                                <a href="tel:+79180490889">+7 (918) 049-08-89</a>
                            </div>

                            <div class="contacts__mail">
                                <span>E-mail:</span>
                                <a href="mailto:mavrodi@saturn-kuban.ru">mavrodi@saturn-kuban.ru</a>
                            </div>
                        </div>
                    </div>
                    <div class="col col--xl-4 col--lg-12  ">

                        <div class="contacts__addr">
                            <span>
                                Россия, г. Краснодар, ул. Солнечная, 6
                            </span>
                        </div>

                        <div class="contacts__scroll">
                            <div class="circle"></div>
                            <span>Посмотреть на карте</span>
                        </div>

                    </div>
                </div>

            </div>

            <div class="ymap-container">
                <div class="loader loader-default"></div>
                <div id="map-yandex"></div>
            </div>
        </section>

    </main>

    <footer class="footer footer_offset footer_bg">
        <div class="wrapper wrapper_large">
            <div class="row">
                <div class="col col--xl-3 col--lg-2 col--md-6">
                    <div class="footer__logo">
                        <img src="images/logo-f.png" alt="">
                    </div>
                </div>
                <div class="col col--xl-2 col--lg-3 col--md-6">
                    <div class="footer_col">
                        <a href="#" class="footer_link">
                            Солнечный коллектор
                        </a>
                        <a href="#" class="footer_link">
                            Решения
                        </a>
                        <a href="#" class="footer_link">
                            Расчет стоимости
                        </a>
                    </div>
                </div>
                <div class="col col--xl-3 col--xl-offset-1 col--lg-4 col--md-6 footer_right">
                    <div class="footer__col">
                        <div class="footer__addr">
                            <span>Адрес: <span class="bold"> Краснодар, ул. Солнечная, 6</span></span>
                        </div>
                        <div class="footer__mobile">
                            <span>Мобильный:</span><a href="tel:+79180490889">
                                +7 (918) 049-08-89
                            </a>
                        </div>
                    </div>
                </div>
                <div class="col col--xl-3 col--lg-3 col--md-6 footer_right">
                    <div class="footer__col">
                        <div class="footer__sub">
                            <span>
                                Телефон:
                            </span>
                        </div>
                        <a href="tel:+78612520913" class="footer__tel">
                            <svg class="icon icon_phone">
                                <use xlink:href="images/phone.svg#phone">
                                </use>
                            </svg>
                            +7 (861) 252-09-13
                        </a>
                    </div>
                </div>
            </div>
            <div class="row footer-bottom footer-bottom_offset">
                <div class="col col--xl-4">
                    <div class="footer__def">
                        © 2019, Все права защищены. ПАО ее
                    </div>
                </div>
                <div class="col col--xl-3 col--lg-1">
                    <a href="#" class="footer__politics">
                        Политика конфиденциальности
                    </a>
                </div>
                <div class="col col--xl-3 col--xl-offset-2 col--lg-4 footer_right">
                    <div class="footer_wf">
                        <span>Разработка сайта - </span>
                        <a href="#">Webformula</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="js/jquery-2.2.4.min.js"></script>
    <script src="js/slick.js"></script>
    <script src="js/svgxuse.min.js"></script>
    <script src="js/jquery.matchHeight.js"></script>
    <script src="js/main.js"></script>

    <script>
        var spinner = $('.ymap-container').children('.loader');
        //Переменная для определения была ли хоть раз загружена Яндекс.Карта (чтобы избежать повторной загрузки при наведении)
        var check_if_load = false;
        //Необходимые переменные для того, чтобы задать координаты на Яндекс.Карте
        var myMapTemp, myPlacemarkTemp;

        //Функция создания карты сайта и затем вставки ее в блок с идентификатором &#34;map-yandex&#34;
        function init() {
            var myMapTemp = new ymaps.Map("map-yandex", {
                center: [45.071800944272276, 38.99419666458707], // координаты центра на карте
                zoom: 17, // коэффициент приближения карты
                controls: ['zoomControl', 'fullscreenControl'] // выбираем только те функции, которые необходимы при использовании
            });
            var myPlacemarkTemp = new ymaps.Placemark([45.071800944272276, 38.99419666458707], {
                balloonContent: "Россия, г. Краснодар, ул. Солнечная, 6",
            }, {
                // Опции.
                // Необходимо указать данный тип макета.
                iconLayout: 'default#imageWithContent',
                // Своё изображение иконки метки.
                iconImageHref: 'images/icon-m.png',
                // Размеры метки.
                iconImageSize: [43, 43],
                // Смещение левого верхнего угла иконки относительно
                // её "ножки" (точки привязки).
                iconImageOffset: [-25, -50],
            });
            myMapTemp.geoObjects.add(myPlacemarkTemp); // помещаем флажок на карту

            // Получаем первый экземпляр коллекции слоев, потом первый слой коллекции
            var layer = myMapTemp.layers.get(0).get(0);

            // Решение по callback-у для определения полной загрузки карты
            waitForTilesLoad(layer).then(function() {
                // Скрываем индикатор загрузки после полной загрузки карты
                spinner.removeClass('is-active');
            });
        }

        // Функция для определения полной загрузки карты (на самом деле проверяется загрузка тайлов) 
        function waitForTilesLoad(layer) {
            return new ymaps.vow.Promise(function(resolve, reject) {
                var tc = getTileContainer(layer),
                    readyAll = true;
                tc.tiles.each(function(tile, number) {
                    if (!tile.isReady()) {
                        readyAll = false;
                    }
                });
                if (readyAll) {
                    resolve();
                } else {
                    tc.events.once("ready", function() {
                        resolve();
                    });
                }
            });
        }

        function getTileContainer(layer) {
            for (var k in layer) {
                if (layer.hasOwnProperty(k)) {
                    if (
                        layer[k] instanceof ymaps.layer.tileContainer.CanvasContainer ||
                        layer[k] instanceof ymaps.layer.tileContainer.DomContainer
                    ) {
                        return layer[k];
                    }
                }
            }
            return null;
        }

        // Функция загрузки API Яндекс.Карт по требованию (в нашем случае при наведении)
        function loadScript(url, callback) {
            var script = document.createElement("script");

            if (script.readyState) { // IE
                script.onreadystatechange = function() {
                    if (script.readyState == "loaded" ||
                        script.readyState == "complete") {
                        script.onreadystatechange = null;
                        callback();
                    }
                };
            } else { // Другие браузеры
                script.onload = function() {
                    callback();
                };
            }

            script.src = url;
            document.getElementsByTagName("head")[0].appendChild(script);
        }

        // Основная функция, которая проверяет когда мы навели на блок с классом &#34;ymap-container&#34;
        var ymap = function() {
            $('.ymap-container').mouseenter(function() {
                if (!check_if_load) { // проверяем первый ли раз загружается Яндекс.Карта, если да, то загружаем

                    // Чтобы не было повторной загрузки карты, мы изменяем значение переменной
                    check_if_load = true;

                    // Показываем индикатор загрузки до тех пор, пока карта не загрузится
                    spinner.addClass('is-active');

                    // Загружаем API Яндекс.Карт
                    loadScript("https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;loadByRequire=1", function() {
                        // Как только API Яндекс.Карт загрузились, сразу формируем карту и помещаем в блок с идентификатором &#34;map-yandex&#34;
                        ymaps.load(init);
                    });
                }
            });
        }

        $(function() {

            //Запускаем основную функцию
            ymap();

        });
    </script>

</body>

</html>